// convenience tasks to fetch build properties from scripts (e.g. see $rootDir/tools/)
task getBuildVersion {
    doLast {
        println(rootProject.version)
    }
}
task getDockerRepoPath {
    doLast {
        println("${project.properties['dockerRepoPath']}")
    }
}
task getDockerImageName {
    doLast {
        println("${project.properties['dockerImageName']}")
    }
}
task getDockerImageTag {
    doLast {
        println("${project.properties['dockerImageTag']}")
    }
}

task generateDocs (type: JavaExec) {
    dependsOn(classes)
    group = 'Documentation'
    description = 'Generate Terra CLI docs'
    classpath(configurations.annotationProcessor, sourceSets.main.runtimeClasspath)
    main 'picocli.codegen.docgen.manpage.ManPageGenerator'
    args 'bio.terra.cli.command.Main', "--outdir=${project.buildDir}/docs/commands/"
}
assemble.dependsOn tasks.generateDocs
